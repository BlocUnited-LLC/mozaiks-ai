{
  "workflow_name": "Incident Escalation Ladder",
  "pattern_id": 2,
  "pattern_name": "Escalation",
  "trigger": "chat",
  "initiated_by": "user",
  "human_in_loop": true,
  "modules": [
    {
      "module_index": 0,
      "module_name": "Tiered Resolution",
      "module_description": "Handle incidents through confidence-scored tiers with explicit promotions when certainty is low.",
      "pattern_id": 2,
      "pattern_name": "Escalation",
      "context_variables": [
        {
          "name": "current_tier",
          "type": "state",
          "description": "Which tier currently owns the incident."
        },
        {
          "name": "tier_confidence",
          "type": "state",
          "description": "Latest confidence score for the response."
        },
        {
          "name": "escalation_reason",
          "type": "state",
          "description": "Why the incident was promoted."
        }
      ],
      "agents": [
        {
          "agent_name": "TriageAgent",
          "agent_type": "intake",
          "objective": "Captures incident details, runs quick diagnostics, and forwards to Tier 1 with a quality bar.",
          "generation_mode": null,
          "agent_tools": [
            {
              "name": "capture_incident",
              "integration": null,
              "purpose": "Inline form to capture severity, impact, and owner.",
              "interaction_mode": "inline"
            },
            {
              "name": "baseline_checks",
              "integration": "OpenAI",
              "purpose": "Run quick heuristics to attach to the incident bundle.",
              "interaction_mode": "none"
            }
          ],
          "lifecycle_tools": [],
          "system_hooks": [],
          "human_interaction": "context",
          "max_consecutive_auto_reply": 20
        },
        {
          "agent_name": "Tier1Agent",
          "agent_type": "worker",
          "objective": "Delivers the first resolution attempt and decides whether to escalate based on confidence.",
          "generation_mode": null,
          "agent_tools": [
            {
              "name": "answer_with_confidence",
              "integration": "OpenAI",
              "purpose": "Return response plus confidence score.",
              "interaction_mode": "none"
            }
          ],
          "lifecycle_tools": [],
          "system_hooks": [],
          "human_interaction": "none",
          "max_consecutive_auto_reply": 30
        },
        {
          "agent_name": "Tier2Agent",
          "agent_type": "worker",
          "objective": "Handles complex issues that Tier 1 could not resolve; augments with advanced diagnostics.",
          "generation_mode": null,
          "agent_tools": [
            {
              "name": "advanced_diagnostics",
              "integration": "OpenAI",
              "purpose": "Deeper investigation and targeted response.",
              "interaction_mode": "none"
            }
          ],
          "lifecycle_tools": [],
          "system_hooks": [],
          "human_interaction": "none",
          "max_consecutive_auto_reply": 30
        },
        {
          "agent_name": "Tier3Agent",
          "agent_type": "worker",
          "objective": "Final specialist or human handoff for critical incidents with low confidence.",
          "generation_mode": null,
          "agent_tools": [
            {
              "name": "final_decision",
              "integration": null,
              "purpose": "Approval/rollback confirmation delivered as an artifact.",
              "interaction_mode": "artifact"
            }
          ],
          "lifecycle_tools": [],
          "system_hooks": [],
          "human_interaction": "approval",
          "max_consecutive_auto_reply": 5
        }
      ],
      "handoffs": [
        {
          "from": "TriageAgent",
          "to": "Tier1Agent",
          "condition": "tier_confidence is None",
          "type": "OnContextCondition"
        },
        {
          "from": "Tier1Agent",
          "to": "Tier2Agent",
          "condition": "tier_confidence < 0.8",
          "type": "OnContextCondition"
        },
        {
          "from": "Tier2Agent",
          "to": "Tier3Agent",
          "condition": "tier_confidence < 0.8",
          "type": "OnContextCondition"
        }
      ],
      "tools": [
        {
          "agent": "TriageAgent",
          "function": "capture_incident",
          "file": "capture_incident.py",
          "description": "Inline capture of severity, impact, and owner.",
          "tool_type": "UI_Tool",
          "auto_invoke": true,
          "ui": {
            "component": "IncidentForm",
            "mode": "inline",
            "ui_pattern": "single_step"
          },
          "integration": null
        },
        {
          "agent": "Tier1Agent",
          "function": "answer_with_confidence",
          "file": "answer_with_confidence.py",
          "description": "Respond with a confidence score to drive escalation decisions.",
          "tool_type": "Agent_Tool",
          "auto_invoke": false,
          "ui": null,
          "integration": "OpenAI"
        },
        {
          "agent": "Tier3Agent",
          "function": "final_decision",
          "file": "final_decision.py",
          "description": "Approval gate for rollback or closure.",
          "tool_type": "UI_Tool",
          "auto_invoke": true,
          "ui": {
            "component": "ApprovalGate",
            "mode": "artifact",
            "ui_pattern": "two_step_confirmation"
          },
          "integration": null
        }
      ],
      "hooks": {
        "before_chat": null,
        "after_chat": null,
        "agent_hooks": []
      },
      "orchestrator": {
        "type": "DefaultPattern",
        "config": {
          "start_agent": "TriageAgent"
        }
      }
    }
  ]
}
