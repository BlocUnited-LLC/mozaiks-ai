{
  "workflow_name": "Coordinator with Spokes",
  "pattern_id": 8,
  "pattern_name": "Star",
  "trigger": "chat",
  "initiated_by": "user",
  "human_in_loop": true,
  "modules": [
    {
      "module_index": 0,
      "module_name": "Hub-and-Spoke Coordination",
      "module_description": "Central coordinator requests data from spokes and synthesizes the final response.",
      "pattern_id": 8,
      "pattern_name": "Star",
      "context_variables": [
        {
          "name": "hub_brief",
          "type": "data_entity",
          "description": "Brief created by the coordinator for spokes."
        },
        {
          "name": "spoke_status",
          "type": "state",
          "description": "Completion flags per spoke."
        },
        {
          "name": "final_response",
          "type": "data_entity",
          "description": "Synthesized response compiled by the coordinator."
        }
      ],
      "agents": [
        {
          "agent_name": "CoordinatorAgent",
          "agent_type": "orchestrator",
          "objective": "Captures the ask, determines which spokes are needed, and synthesizes the final answer.",
          "generation_mode": null,
          "agent_tools": [
            {
              "name": "capture_request",
              "integration": null,
              "purpose": "Inline capture of city/date/topic to brief spokes.",
              "interaction_mode": "inline"
            }
          ],
          "lifecycle_tools": [],
          "system_hooks": [],
          "human_interaction": "context",
          "max_consecutive_auto_reply": 20
        },
        {
          "agent_name": "DataSpoke",
          "agent_type": "worker",
          "objective": "Provides data or research requested by the coordinator.",
          "generation_mode": null,
          "agent_tools": [
            {
              "name": "gather_data",
              "integration": "OpenAI",
              "purpose": "Gather requested data slices.",
              "interaction_mode": "none"
            }
          ],
          "lifecycle_tools": [],
          "system_hooks": [],
          "human_interaction": "none",
          "max_consecutive_auto_reply": 30
        },
        {
          "agent_name": "ContentSpoke",
          "agent_type": "worker",
          "objective": "Drafts narrative content or messaging requested by the coordinator.",
          "generation_mode": null,
          "agent_tools": [
            {
              "name": "draft_content",
              "integration": "OpenAI",
              "purpose": "Create copy ready for synthesis.",
              "interaction_mode": "none"
            }
          ],
          "lifecycle_tools": [],
          "system_hooks": [],
          "human_interaction": "none",
          "max_consecutive_auto_reply": 30
        },
        {
          "agent_name": "RiskSpoke",
          "agent_type": "worker",
          "objective": "Calls out risks, constraints, or approvals needed.",
          "generation_mode": null,
          "agent_tools": [
            {
              "name": "assess_risks",
              "integration": "OpenAI",
              "purpose": "List key risks/assumptions for the request.",
              "interaction_mode": "none"
            }
          ],
          "lifecycle_tools": [],
          "system_hooks": [],
          "human_interaction": "none",
          "max_consecutive_auto_reply": 30
        }
      ],
      "handoffs": [
        {
          "from": "CoordinatorAgent",
          "to": "DataSpoke",
          "condition": "spoke_status.get('data') != 'complete'",
          "type": "OnContextCondition"
        },
        {
          "from": "CoordinatorAgent",
          "to": "ContentSpoke",
          "condition": "spoke_status.get('content') != 'complete'",
          "type": "OnContextCondition"
        },
        {
          "from": "CoordinatorAgent",
          "to": "RiskSpoke",
          "condition": "spoke_status.get('risk') != 'complete'",
          "type": "OnContextCondition"
        },
        {
          "from": "DataSpoke",
          "to": "CoordinatorAgent",
          "condition": "True",
          "type": "OnContextCondition"
        },
        {
          "from": "ContentSpoke",
          "to": "CoordinatorAgent",
          "condition": "True",
          "type": "OnContextCondition"
        },
        {
          "from": "RiskSpoke",
          "to": "CoordinatorAgent",
          "condition": "True",
          "type": "OnContextCondition"
        }
      ],
      "tools": [
        {
          "agent": "CoordinatorAgent",
          "function": "capture_request",
          "file": "capture_request.py",
          "description": "Inline capture of the ask to generate spoke briefs.",
          "tool_type": "UI_Tool",
          "auto_invoke": true,
          "ui": {
            "component": "RequestCapture",
            "mode": "inline",
            "ui_pattern": "single_step"
          },
          "integration": null
        }
      ],
      "hooks": {
        "before_chat": null,
        "after_chat": null,
        "agent_hooks": []
      },
      "orchestrator": {
        "type": "DefaultPattern",
        "config": {
          "start_agent": "CoordinatorAgent"
        }
      }
    }
  ]
}
