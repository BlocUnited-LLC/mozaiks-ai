{
  "context_variables": {
    "definitions": {
      "context_aware": {
        "type": "boolean",
        "description": "Flag indicating if the application is opensource (in which the llm will ask for context) or part of an existing product in which the agent will be seeded with initial context",
        "source": {
          "type": "config",
          "env_var": "CONTEXT_AWARE",
          "default": true
        }
      },
      "concept_overview": {
        "type": "string",
        "description": "Main project description and overview from the database",
        "source": {
          "type": "data_reference",
          "db_type": "mongodb",
          "database_name": "autogen_ai_agents",
          "collection": "Concepts",
          "query_template": {
            "enterprise_id": "{{runtime.enterprise_id}}"
          },
          "fields": ["ConceptOverview"]
        }
      },
      "monetization_enabled": {
        "type": "boolean",
        "description": "Flag indicating if monetization features are enabled",
        "source": {
          "type": "config",
          "env_var": "MONETIZATION_ENABLED",
          "default": false
        }
      },
      "context_include_schema": {
        "type": "boolean",
        "description": "Flag indicating if database schema access is enabled for this workflow",
        "source": {
          "type": "config",
          "env_var": "CONTEXT_INCLUDE_SCHEMA",
          "default": false
        }
      },
      "context_schema_db": {
        "type": "string",
        "description": "Name of the database this workflow has schema access to",
        "source": {
          "type": "config",
          "env_var": "CONTEXT_SCHEMA_DB",
          "default": null
        }
      },
      "interview_complete": {
        "type": "boolean",
        "description": "True once InterviewAgent has enough context to proceed to the next stage",
        "source": {
          "type": "state",
          "default": false,
          "transitions": [
            {
              "to": true,
              "trigger": {
                "type": "agent_text",
                "agent": "InterviewAgent",
                "ui_hidden": true,
                "match": {
                  "equals": "NEXT"
                }
              }
            }
          ]
        }
      },
      "action_plan_acceptance": {
        "type": "string",
        "description": "User's response to the action plan: 'accepted', 'adjustments_requested', or 'pending'. Updated after the combined Action Plan + diagram review UI completes.",
        "source": {
          "type": "state",
          "default": "pending",
          "transitions": [
            {
              "trigger": {
                "type": "ui_response",
                "tool": "mermaid_sequence_diagram",
                "response_key": "plan_acceptance"
              }
            }
          ]
        }
      },
      "action_plan": {
        "type": "object",
        "description": "The complete module-based Action Plan workflow object generated by WorkflowImplementationAgent. Used for revision handling and downstream UI updates.",
        "source": {
          "type": "computed",
          "default": null
        }
      },
      "workflow_strategy": {
        "type": "object",
        "description": "High-level workflow strategy (modules) generated by WorkflowStrategyAgent for downstream implementation.",
        "source": {
          "type": "computed",
          "default": null
        }
      },
      "technical_blueprint": {
        "type": "object",
        "description": "Workflow-wide technical blueprint detailing shared context variables, UI Components, and lifecycle hooks authored by WorkflowArchitectAgent.",
        "source": {
          "type": "computed",
          "default": null
        }
      },
      "strategy_ready": {
        "type": "boolean",
        "description": "True when WorkflowStrategyAgent has stored the high-level plan for downstream agents.",
        "source": {
          "type": "state",
          "default": false,
          "transitions": []
        }
      },
      "download_complete": {
        "type": "boolean",
        "description": "True when user accepts workflow download and completes the session. Triggers workflow termination.",
        "source": {
          "type": "state",
          "default": false,
          "transitions": [
            {
              "to": true,
              "trigger": {
                "type": "ui_response",
                "tool": "generate_and_download",
                "response_key": "download_accepted"
              }
            }
          ]
        }
      }
    },
    "agents": {
      "InterviewAgent": {
        "variables": [
          "context_aware",
          "concept_overview",
          "monetization_enabled"
        ]
      },
      "WorkflowStrategyAgent": {
        "variables": [
          "concept_overview",
          "interview_complete",
          "workflow_strategy",
          "strategy_ready"
        ]
      },
      "WorkflowArchitectAgent": {
        "variables": [
          "concept_overview",
          "monetization_enabled",
          "workflow_strategy",
          "action_plan",
          "context_include_schema",
          "context_schema_db",
          "database_schema_available",
          "database_schema_db",
          "schema_overview",
          "collections_first_docs_full"
        ]
      },
      "WorkflowImplementationAgent": {
        "variables": [
          "concept_overview",
          "workflow_strategy",
          "action_plan",
          "strategy_ready",
          "action_plan_acceptance"
        ]
      },
      "ProjectOverviewAgent": {
        "variables": [
          "action_plan_acceptance",
          "technical_blueprint",
          "action_plan"
        ]
      }
    }
  }
}
