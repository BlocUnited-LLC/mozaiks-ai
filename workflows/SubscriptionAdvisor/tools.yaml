# SubscriptionAdvisor Tools
# All tools enforce: read_only=true, no_external_mutations=true, tenant_scoped=true

tools:
  # KPI Collection Tools (Read-Only)
  - agent: KPICollector
    file: read_platform_kpis.py
    function: read_platform_kpis
    description: >
      Read platform-level KPIs for a user from MozaiksPay token ledger,
      runtime event store, and performance metrics. Read-only, tenant-scoped.
    tool_type: Agent_Tool
    auto_invoke: true
    constraints:
      read_only: true
      no_external_mutations: true
      tenant_scoped: true
    ui:
      component: null
      mode: null

  - agent: KPICollector
    file: read_app_telemetry.py
    function: read_app_telemetry
    description: >
      Read app-level telemetry including workflow list, tool usage,
      token consumption, and plugin access patterns. Read-only, app-scoped.
    tool_type: Agent_Tool
    auto_invoke: true
    constraints:
      read_only: true
      no_external_mutations: true
      tenant_scoped: true
    ui:
      component: null
      mode: null

  # Advisory Generation Tools (Read-Only + Webhook POST)
  - agent: AdvisoryGenerator
    file: generate_platform_advisory.py
    function: generate_platform_advisory
    description: >
      Analyze platform KPIs and generate MozaiksPlatformAdvisory JSON.
      Posts to Control-Plane webhook. No mutations, no Stripe access.
    tool_type: Agent_Tool
    auto_invoke: true
    constraints:
      read_only: true
      no_external_mutations: true
      tenant_scoped: true
      allowed_external_calls:
        - "POST /internal/advisory/ingest"
    ui:
      component: null
      mode: null

  - agent: AdvisoryGenerator
    file: generate_app_advisory.py
    function: generate_app_advisory
    description: >
      Analyze app telemetry and generate AppSubscriptionAdvisor JSON.
      Posts to Control-Plane webhook. No mutations, no Stripe access.
    tool_type: Agent_Tool
    auto_invoke: true
    constraints:
      read_only: true
      no_external_mutations: true
      tenant_scoped: true
      allowed_external_calls:
        - "POST /internal/advisory/ingest"
    ui:
      component: null
      mode: null
